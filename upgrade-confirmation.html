<!DOCTYPE html>
<html>
<head>
<script>
    !function(t,e){var o,n,p,r;e.__SV||(window.posthog && window.posthog.__loaded)||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.crossOrigin="anonymous",p.async=!0,p.src=s.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="init zr Wr fi Br Gr ci Nr Hr capture Ui calculateEventProperties Kr register register_once register_for_session unregister unregister_for_session Zr getFeatureFlag getFeatureFlagPayload isFeatureEnabled reloadFeatureFlags updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures on onFeatureFlags onSurveysLoaded onSessionId getSurveys getActiveMatchingSurveys renderSurvey displaySurvey cancelPendingSurvey canRenderSurvey canRenderSurveyAsync identify setPersonProperties group resetGroups setPersonPropertiesForFlags resetPersonPropertiesForFlags setGroupPropertiesForFlags resetGroupPropertiesForFlags reset get_distinct_id getGroups get_session_id get_session_replay_url alias set_config startSessionRecording stopSessionRecording sessionRecordingStarted captureException loadToolbar get_property getSessionProperty Xr Jr createPersonProfile Qr jr ts opt_in_capturing opt_out_capturing has_opted_in_capturing has_opted_out_capturing get_explicit_consent_status is_capturing clear_opt_in_out_capturing Vr debug O Yr getPageViewId captureTraceFeedback captureTraceMetric Or".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);
    posthog.init('phc_HqgzMyWAMtzH7K5j9CLw0dijB0I9W1VjPkkyzg9KOFG', {
        api_host: 'https://us.i.posthog.com',
        defaults: '2025-11-30',
        person_profiles: 'identified_only',
    })
</script>

<!-- Bing UET Tag -->
<script>
    (function(w,d,t,r,u)
    {
        var f,n,i;
        w[u]=w[u]||[],f=function()
        {
            var o={ti:"343223134", enableAutoSpaTracking: true};
            o.q=w[u],w[u]=new UET(o),w[u].push("pageLoad")
        },
        n=d.createElement(t),n.src=r,n.async=1,n.onload=n.onreadystatechange=function()
        {
            var s=this.readyState;
            s&&s!=="loaded"&&s!=="complete"||(f(),n.onload=n.onreadystatechange=null)
        },
        i=d.getElementsByTagName(t)[0],i.parentNode.insertBefore(n,i)
    })
    (window,document,"script","//bat.bing.com/bat.js","uetq");
</script>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=AW-17588707745"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'AW-17588707745');
</script>

<link rel="icon" href="https://i.ibb.co/jPjX9SSp/Screen-Shot-2025-03-28-at-8-16-15-PM.png">
<title>Payment Successful - LinkFinder AI</title>
<style>
    body {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
        background-color: #f9fafb;
    }
    .container {
        max-width: 480px;
        text-align: center;
        padding: 40px;
        background-color: white;
        border-radius: 12px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
    }
    .spinner {
        border: 3px solid rgba(0, 0, 0, 0.1);
        border-radius: 50%;
        border-top: 3px solid #2563eb;
        width: 24px;
        height: 24px;
        animation: spin 1s linear infinite;
        margin: 0 auto 20px;
    }
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
    h1 {
        color: #111827;
        font-size: 24px;
        margin-bottom: 20px;
    }
    #status {
        color: #4b5563;
        font-size: 16px;
        line-height: 1.5;
    }
    .success-icon {
        color: #2563eb;
        font-size: 48px;
        margin-bottom: 20px;
    }
    .logo {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        margin-bottom: 20px;
        color: #111827;
        text-decoration: none;
    }
    .logo-icon {
        width: 32px;
        height: 32px;
        background: #2563eb;
        border-radius: 6px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 1rem;
    }
    .logo-text {
        font-size: 1.25rem;
        font-weight: 600;
        color: #111827;
    }
</style>

<!-- Plausible Analytics -->
<script async src="https://plausible.io/js/pa-LTP3nlbjr9NybMEgzpwxU.js"></script>
<script>
    window.plausible=window.plausible||function(){(plausible.q=plausible.q||[]).push(arguments)},plausible.init=plausible.init||function(i){plausible.o=i||{}};
    plausible.init()
</script>

<!-- Tolt -->
<script async src="https://cdn.tolt.io/tolt.js" data-tolt="pk_CAtHKL6z3BUN8BWfHENpoM1e"></script>
</head>
<body>
    <div class="container">
        <div class="logo">
            <div class="logo-icon">ğŸ”</div>
            <span class="logo-text">LinkFinder AI</span>
        </div>
        <div class="success-icon">âœ“</div>
        <h1>Payment Successful!</h1>
        <div class="spinner"></div>
        <div id="status">Redirecting to your dashboard...</div>
    </div>

    <script>
        (function() {
            console.log('ğŸ‰ Payment Success Page - Gumroad');
            
            // Extract URL parameters
            const urlParams = new URLSearchParams(window.location.search);
            
            // Get payment info from Gumroad redirect
            const email = urlParams.get('email') || '';
            const productName = urlParams.get('product_name') || urlParams.get('product') || '';
            const saleId = urlParams.get('sale_id') || '';
            const price = parseFloat(urlParams.get('price')) || 59.0;
            const gclid = urlParams.get('gclid') || '';
            
            console.log('Payment info:', { 
                email: email || 'not provided', 
                product: productName || 'not provided',
                saleId: saleId || 'not provided',
                price 
            });
            
            // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            // TRACK CONVERSIONS
            // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            
            // 1. Google Ads Conversion
            try {
                gtag('event', 'conversion', {
                    'send_to': 'AW-17588707745/7IXYCLvJoZ8bEKHD-cJB',
                    'value': price,
                    'currency': 'EUR',
                    'transaction_id': saleId || Date.now().toString(),
                    'gclid': gclid || undefined
                });
                console.log('âœ… Google Ads conversion tracked');
            } catch (e) {
                console.log('âš ï¸ Google Ads tracking failed:', e.message);
            }
            
            // 2. Bing UET Purchase Event
            try {
                window.uetq = window.uetq || [];
                window.uetq.push('event', 'purchase', {
                    'revenue_value': price,
                    'currency': 'EUR'
                });
                console.log('âœ… Bing UET purchase tracked');
            } catch (e) {
                console.log('âš ï¸ Bing UET tracking failed:', e.message);
            }
            
            // 3. Plausible Event
            try {
                if (typeof window.plausible === 'function') {
                    window.plausible('new paid user', {
                        props: {
                            product: productName,
                            amount: price
                        }
                    });
                    console.log('âœ… Plausible event tracked');
                }
            } catch (e) {
                console.log('âš ï¸ Plausible tracking failed:', e.message);
            }
            
            // 4. PostHog Event
            try {
                if (window.posthog) {
                    posthog.capture('payment_successful', {
                        product: productName,
                        amount: price,
                        sale_id: saleId,
                        source: 'gumroad'
                    });
                    console.log('âœ… PostHog event tracked');
                }
            } catch (e) {
                console.log('âš ï¸ PostHog tracking failed:', e.message);
            }
            
            // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            // REDIRECT TO APP
            // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            
            console.log('â³ Waiting 2 seconds before redirect...');
            
            setTimeout(function() {
                // Build redirect URL
                let redirectUrl = 'https://linkfinderai.com/app';
                
                // Add email as query param if available
                if (email) {
                    redirectUrl += `?email=${encodeURIComponent(email)}`;
                }
                
                console.log('ğŸ”„ Redirecting to:', redirectUrl);
                window.location.href = redirectUrl;
            }, 2000); // 2 second delay to ensure tracking fires
            
        })();
    </script>
</body>
</html>
